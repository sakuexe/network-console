---
import Layout from '../layouts/Layout.astro'
import Devices from './_devices.astro'

const currentYear = new Date().getFullYear()
const currentMonth = new Date().getMonth() + 1
const currentDay = new Date().getDate()

const response = await fetch('https://api.ipify.org?format=json')
const data = await response.json()
const currentIp = data.ip
---

<Layout title="Tllabra devices" showFooter>
  <header class="container">
    <h1>Tllabra <span>{currentDay}.{currentMonth}.{currentYear}</span></h1>
    <p>List of devices in the network</p>
    <p>Your IP: <span class="text-bold">{currentIp || 'unknown IP'}</span></p>
  </header>
  <Devices />
</Layout>

<style>
  p > span {
    user-select: all;
  }
</style>
